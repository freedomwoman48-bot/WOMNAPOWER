<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>סכנה! ספר הבישול שלך עלול לגרום לשוויון</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Assistant', sans-serif;
            padding-bottom: 50px; /* Add padding to prevent footer from overlapping content */
        }
        .fade-in {
            animation: fadeIn 1s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        /* Style for the chat window */
        #chat-window {
            transition: all 0.3s ease-in-out;
        }
        .message-bubble {
            max-width: 80%;
            word-wrap: break-word;
        }
        .user-message {
            background-color: #3b82f6; /* blue-500 */
            color: white;
            align-self: flex-start; /* For LTR this would be flex-end */
        }
        .bot-message {
            background-color: #e5e7eb; /* gray-200 */
            color: #1f2937; /* gray-800 */
            align-self: flex-end; /* For LTR this would be flex-start */
        }
        /* Scrollbar styles for chat */
        #chat-messages::-webkit-scrollbar {
            width: 6px;
        }
        #chat-messages::-webkit-scrollbar-track {
            background: #f1f5f9; /* slate-100 */
        }
        #chat-messages::-webkit-scrollbar-thumb {
            background: #94a3b8; /* slate-400 */
            border-radius: 3px;
        }
        #chat-messages::-webkit-scrollbar-thumb:hover {
            background: #64748b; /* slate-500 */
        }
        /* Ticker styles */
        #ticker-footer {
            overflow: hidden;
            white-space: nowrap;
        }
        #ticker-text {
            display: inline-block;
            animation: ticker-scroll 180s linear infinite;
        }
        @keyframes ticker-scroll {
            0% {
                transform: translateX(100%);
            }
            100% {
                transform: translateX(-100%);
            }
        }
        /* Custom styles for the slider */
        input[type="range"] {
            -webkit-appearance: none;
            appearance: none;
            width: 100%;
            height: 8px;
            background: #e2e8f0; /* slate-200 */
            border-radius: 5px;
            outline: none;
        }
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            background: #f43f5e; /* rose-500 */
            cursor: pointer;
            border-radius: 50%;
        }
        input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            background: #f43f5e; /* rose-500 */
            cursor: pointer;
            border-radius: 50%;
        }
        /* Additional styles for prose output from AI */
        .prose br {
            display: block;
            content: "";
            margin-top: 0.5em;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <!-- Header Section -->
    <header class="bg-rose-500 text-white text-center py-16 px-4 fade-in relative">
        <h1 class="text-4xl md:text-6xl font-bold mb-4 drop-shadow-lg">סכנה! ספר הבישול הזה עלול לגרום לשוויון</h1>
        <p class="text-lg md:text-2xl max-w-3xl mx-auto">ולמה זה הדבר הכי מדהים שיקרה לכם במטבח</p>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-12">
        
        <!-- Absurd Exaggerations Section -->
        <section class="mb-16 fade-in" style="animation-delay: 200ms;">
            <h2 class="text-3xl font-bold text-center mb-8 text-rose-600">האסון: גברים במטבח - האם סוף העולם קרוב?</h2>
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Card 1 -->
                <div class="bg-white p-6 rounded-lg shadow-lg border border-slate-200 hover:shadow-xl transition-shadow">
                    <h3 class="font-bold text-xl mb-3">ערעור יסודות הפטריארכיה</h3>
                    <p>דו"ח מיוחד קובע: השימוש הגברי בפפריקה מתוקה גורם לשיבושים קוונטיים במרקם הזמן-חלל הפטריארכלי. כל קורטוב נוסף מקרב אותנו לקראת עולם שבו זוג גרביים לא צריך הוראות הפעלה.</p>
                </div>
                <!-- Card 2 -->
                <div class="bg-white p-6 rounded-lg shadow-lg border border-slate-200 hover:shadow-xl transition-shadow">
                    <h3 class="font-bold text-xl mb-3">התפתחות רגשית מסוכנת</h3>
                    <p>תופעה מדאיגה: גברים מפתחים יכולת להבחין בין פטרוזיליה לכוסברה. מדענים חוששים שזהו השלב הראשון בדרך להבנה של מה זה "לא להשאיר כלים בכיור". התוצאות עלולות להיות הרסניות.</p>
                </div>
                <!-- Card 3 -->
                <div class="bg-white p-6 rounded-lg shadow-lg border border-slate-200 hover:shadow-xl transition-shadow">
                    <h3 class="font-bold text-xl mb-3">הפרדוקס של הקיש</h3>
                    <p>מה יקרה אם גבר יכין קיש? האם היקום יקרוס לתוך עצמו בחור שחור של בצק פריך? עדיין אין לנו תשובה, אבל אנחנו מעדיפים לא לקחת את הסיכון. נא להמשיך בחذر.</p>
                </div>
            </div>
        </section>

        <!-- The Real Message Section -->
        <section class="bg-slate-100 rounded-lg p-8 md:p-12 mb-16 fade-in" style="animation-delay: 400ms;">
            <h2 class="text-3xl font-bold text-center mb-8 text-rose-600">מרד המריות: למה ספר בישול הוא הנשק הסודי שלכם</h2>
            <div class="max-w-3xl mx-auto space-y-6 text-center text-lg">
                <p class="leading-relaxed">בואו נודה באמת, הרעיון שרק חצי מהאוכלוסייה יודע להפעיל תנור הוא לא רק מיושן, הוא גם ממש לא יעיל. תחשבו על כל האוכל הפוטנציאלי שאנחנו מפספסים!</p>
                <p class="font-bold text-xl bg-rose-100 p-4 rounded-md">בישול הוא כימיה, פיזיקה ואומנות. לא כרומוזומים.</p>
                <p class="leading-relaxed">ספר בישול הוא בסך הכל מדריך למשתמש. כמו לרהיט מאיקאה, רק שבסוף יוצא משהו טעים ולא מדף עקום עם בורג ספייר. כל אחד ואחת יכולים לעקוב אחרי הוראות.</p>
                <p class="italic p-4 border-r-4 border-rose-400 bg-white shadow-sm">"תנו לגבר ספר בישול, והוא יאכל ליום אחד. למדו אותו שזה בסדר גמור להשתמש בו, ותרוויחו שותף שווה במטבח (ואולי, רק אולי, גם מישהו שישטוף כלים)."</p>
            </div>
        </section>

        <!-- FAQ Section -->
        <section class="mb-16 fade-in" style="animation-delay: 600ms;">
            <h2 class="text-3xl font-bold text-center mb-8 text-rose-600">שאלות נפוצות (ותשובות אמיצות)</h2>
            <div class="max-w-4xl mx-auto space-y-6">
                <!-- FAQ Item 1 -->
                <div class="bg-white p-6 rounded-lg shadow-lg border border-slate-200">
                    <h3 class="font-bold text-xl mb-2">אבל אם בעלי יתחיל לבשל, מה יהיה התפקיד שלי?</h3>
                    <p>מצוין ששאלת! תפקידך יהיה לטעום, ליהנות, ולנהל משא ומתן על מי שוטף כלים. זה נקרא 'קידום'. חוץ מזה, תמיד תוכלי ללמד אותו איך *באמת* מקפלים כביסה, כי זה מדע טילים, כידוע.</p>
                </div>
                <!-- FAQ Item 2 -->
                <div class="bg-white p-6 rounded-lg shadow-lg border border-slate-200">
                    <h3 class="font-bold text-xl mb-2">אני חושש שאם אתחיל לבשל, החברים שלי יצחקו עליי.</h3>
                    <p>תשמע, אם החברים שלך צוחקים עליך כי אתה יודע להכין סטייק מושלם או פסטה שתגרום לאיטלקים לבכות מאושר, אולי הגיע הזמן לחברים חדשים. או שתזמין אותם לארוחה ותראה איך הם הופכים לחברים הכי טובים שלך פתאום.</p>
                </div>
                <!-- FAQ Item 3 -->
                <div class="bg-white p-6 rounded-lg shadow-lg border border-slate-200">
                    <h3 class="font-bold text-xl mb-2">מה יקרה אם האוכל שלי לא יצא טעים?</h3>
                    <p>ברוך הבא למועדון! זה קורה לכולם, גם לשפים הכי גדולים. הכנת אוכל לא טעים היא לא כישלון מגדרי, אלא הזדמנות להזמין פיצה בלי רגשות אשם. בפעם הבאה יצליח יותר.</p>
                </div>
            </div>
        </section>
        
        <!-- Equity Calculator Section -->
        <section class="bg-rose-50 rounded-lg p-8 md:p-12 mb-16 fade-in" style="animation-delay: 800ms;">
            <h2 class="text-3xl font-bold text-center mb-8 text-rose-600">מחשבון השוויון במטלות הבית</h2>
            <p class="text-center max-w-2xl mx-auto mb-10">סקרנים לדעת אם חלוקת העבודה בבית שלכם מאוזנת או שהפטריארכיה חוגגת? הזינו את מספר השעות השבועיות והמחשבון יספק פסק דין חד משמעי.</p>
            
            <div class="max-w-4xl mx-auto grid md:grid-cols-2 gap-x-12 gap-y-6">
                <!-- Person 1 Column -->
                <div class="space-y-4">
                    <h3 class="text-2xl font-bold text-center">אני</h3>
                    <!-- Task 1 -->
                    <div>
                        <label for="p1-cooking" class="block mb-1 font-semibold">בישול ואפייה</label>
                        <div class="flex items-center gap-4">
                           <input type="range" id="p1-cooking" class="task-slider" data-person="1" min="0" max="30" value="0">
                           <span class="font-bold w-12 text-center"><span class="slider-value">0</span> ש'</span>
                        </div>
                    </div>
                    <!-- Task 2 -->
                    <div>
                        <label for="p1-dishes" class="block mb-1 font-semibold">שטיפת כלים</label>
                         <div class="flex items-center gap-4">
                           <input type="range" id="p1-dishes" class="task-slider" data-person="1" min="0" max="15" value="0">
                           <span class="font-bold w-12 text-center"><span class="slider-value">0</span> ש'</span>
                        </div>
                    </div>
                     <!-- Task 3 -->
                    <div>
                        <label for="p1-laundry" class="block mb-1 font-semibold">כביסה וקיפול</label>
                         <div class="flex items-center gap-4">
                           <input type="range" id="p1-laundry" class="task-slider" data-person="1" min="0" max="10" value="0">
                           <span class="font-bold w-12 text-center"><span class="slider-value">0</span> ש'</span>
                        </div>
                    </div>
                     <!-- Task 4 -->
                    <div>
                        <label for="p1-cleaning" class="block mb-1 font-semibold">ניקיון כללי</label>
                         <div class="flex items-center gap-4">
                           <input type="range" id="p1-cleaning" class="task-slider" data-person="1" min="0" max="20" value="0">
                           <span class="font-bold w-12 text-center"><span class="slider-value">0</span> ש'</span>
                        </div>
                    </div>
                    <!-- Task 5 -->
                    <div>
                        <label for="p1-mental" class="block mb-1 font-semibold">'עומס מנטלי' (תכנון, קניות)</label>
                         <div class="flex items-center gap-4">
                           <input type="range" id="p1-mental" class="task-slider" data-person="1" min="0" max="20" value="0">
                           <span class="font-bold w-12 text-center"><span class="slider-value">0</span> ש'</span>
                        </div>
                    </div>
                </div>
                <!-- Person 2 Column -->
                 <div class="space-y-4">
                    <h3 class="text-2xl font-bold text-center">השותף/ה שלי</h3>
                    <!-- Task 1 -->
                    <div>
                        <label for="p2-cooking" class="block mb-1 font-semibold">בישול ואפייה</label>
                        <div class="flex items-center gap-4">
                           <input type="range" id="p2-cooking" class="task-slider" data-person="2" min="0" max="30" value="0">
                           <span class="font-bold w-12 text-center"><span class="slider-value">0</span> ש'</span>
                        </div>
                    </div>
                    <!-- Task 2 -->
                    <div>
                        <label for="p2-dishes" class="block mb-1 font-semibold">שטיפת כלים</label>
                         <div class="flex items-center gap-4">
                           <input type="range" id="p2-dishes" class="task-slider" data-person="2" min="0" max="15" value="0">
                           <span class="font-bold w-12 text-center"><span class="slider-value">0</span> ש'</span>
                        </div>
                    </div>
                     <!-- Task 3 -->
                    <div>
                        <label for="p2-laundry" class="block mb-1 font-semibold">כביסה וקיפול</label>
                         <div class="flex items-center gap-4">
                           <input type="range" id="p2-laundry" class="task-slider" data-person="2" min="0" max="10" value="0">
                           <span class="font-bold w-12 text-center"><span class="slider-value">0</span> ש'</span>
                        </div>
                    </div>
                     <!-- Task 4 -->
                    <div>
                        <label for="p2-cleaning" class="block mb-1 font-semibold">ניקיון כללי</label>
                         <div class="flex items-center gap-4">
                           <input type="range" id="p2-cleaning" class="task-slider" data-person="2" min="0" max="20" value="0">
                           <span class="font-bold w-12 text-center"><span class="slider-value">0</span> ש'</span>
                        </div>
                    </div>
                    <!-- Task 5 -->
                    <div>
                        <label for="p2-mental" class="block mb-1 font-semibold">'עומס מנטלי' (תכנון, קניות)</label>
                         <div class="flex items-center gap-4">
                           <input type="range" id="p2-mental" class="task-slider" data-person="2" min="0" max="20" value="0">
                           <span class="font-bold w-12 text-center"><span class="slider-value">0</span> ש'</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Calculate Button & Results -->
            <div class="text-center mt-10">
                <button id="calculate-btn" class="bg-rose-500 text-white font-bold py-3 px-8 rounded-full text-lg hover:bg-rose-600 transition-colors shadow-lg">חשב/י את גזר הדין</button>
                <div id="calculator-results" class="mt-8 hidden">
                    <h3 class="text-2xl font-bold mb-4">תוצאות המהפכה:</h3>
                    <div class="w-full max-w-md mx-auto bg-slate-200 rounded-full h-8 flex overflow-hidden border border-slate-300">
                        <div id="p1-bar" class="bg-rose-500 flex items-center justify-center text-white font-bold transition-all duration-500"></div>
                        <div id="p2-bar" class="bg-slate-400 flex items-center justify-center text-white font-bold transition-all duration-500"></div>
                    </div>
                    <div class="flex justify-between max-w-md mx-auto mt-2 text-sm">
                        <span>אני: <span id="p1-percentage">0</span>%</span>
                        <span>השותף/ה: <span id="p2-percentage">0</span>%</span>
                    </div>
                    <p id="verdict-text" class="text-xl font-bold mt-6 p-4 bg-white rounded-lg shadow-inner max-w-xl mx-auto"></p>
                </div>
            </div>
        </section>

        <!-- AI Recipe Book Section -->
        <section id="ai-recipe-generator" class="bg-slate-100 rounded-lg p-8 md:p-12 mb-16 fade-in" style="animation-delay: 900ms;">
            <h2 class="text-3xl font-bold text-center mb-8 text-rose-600">ספר המתכונים המהפכני</h2>
            <p class="text-center max-w-3xl mx-auto mb-10">
                תקוע/ה עם שאריות במקרר ואין לך מושג מה להכין? הפטריארכיה רוצה שתזמיני טייקאווי. אנחנו אומרות: הפיכי את הכאוס ליצירה! רשמי/י את המצרכים שיש לך, והשפית המהפכנית שלנו תייצר עבורך מתכון שיערער את הסדר הקיים.
            </p>
            <div class="max-w-2xl mx-auto">
                <div class="flex flex-col sm:flex-row gap-2">
                    <input type="text" id="ingredients-input" placeholder="לדוגמה: עגבניות, בצל, שום, פסטה..." class="flex-1 p-3 border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-rose-500 text-lg">
                    <button id="generate-recipe-btn" class="bg-rose-500 text-white font-bold py-3 px-6 rounded-md text-lg hover:bg-rose-600 transition-colors shadow-lg flex items-center justify-center min-w-[150px]">
                        <span id="btn-text">צרי מתכון!</span>
                        <span id="btn-loader" class="hidden">
                            <svg class="animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                            </svg>
                        </span>
                    </button>
                </div>
            </div>
            <div id="recipe-output" class="mt-10 bg-white p-6 md:p-8 rounded-lg shadow-inner hidden prose max-w-none">
                <!-- Generated recipe will appear here -->
            </div>
        </section>

        <!-- Starter Kit Section -->
        <section class="mb-16 fade-in" style="animation-delay: 1000ms;">
            <h2 class="text-3xl font-bold text-center mb-8 text-rose-600">ערכת התחלה למהפכן המטבח</h2>
            <div class="max-w-4xl mx-auto grid md:grid-cols-2 gap-8">
                <!-- Kit Item 1 -->
                <div class="bg-white p-6 rounded-lg shadow-lg border border-slate-200 flex items-center gap-4 hover:shadow-xl transition-shadow">
                    <div class="flex-shrink-0 h-16 w-16 bg-rose-100 rounded-full flex items-center justify-center">
                         <svg class="h-8 w-8 text-rose-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>
                    </div>
                    <div>
                        <h3 class="font-bold text-xl mb-1">סינר העלמות</h3>
                        <p>מסתיר כתמים וגבריות שברירית בו זמנית. מגיע עם כיסים לאחסון תירוצים ושאריות אגו.</p>
                    </div>
                </div>
                <!-- Kit Item 2 -->
                <div class="bg-white p-6 rounded-lg shadow-lg border border-slate-200 flex items-center gap-4 hover:shadow-xl transition-shadow">
                    <div class="flex-shrink-0 h-16 w-16 bg-rose-100 rounded-full flex items-center justify-center">
                        <svg class="h-8 w-8 text-rose-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" />
                        </svg>
                    </div>
                    <div>
                        <h3 class="font-bold text-xl mb-1">מטף כיבוי אש (לתמיכה רגשית)</h3>
                        <p>לרגעים האלה שהמתכון אומר 'לקפל בעדינות' ואתה רק רוצה לצרוח. משמש גם לכיבוי טוסטים שרופים.</p>
                    </div>
                </div>
                <!-- Kit Item 3 -->
                <div class="bg-white p-6 rounded-lg shadow-lg border border-slate-200 flex items-center gap-4 hover:shadow-xl transition-shadow">
                    <div class="flex-shrink-0 h-16 w-16 bg-rose-100 rounded-full flex items-center justify-center">
                        <svg class="h-8 w-8 text-rose-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25" />
                        </svg>
                    </div>
                    <div>
                        <h3 class="font-bold text-xl mb-1">מילון מונחי מטבח</h3>
                        <p>מתרגם ביטויים מאיימים כמו 'חליטה', 'הקפצה', ו-'למה אתה מתכוון שהפח מלא?'.</p>
                    </div>
                </div>
                 <!-- Kit Item 4 -->
                <div class="bg-white p-6 rounded-lg shadow-lg border border-slate-200 flex items-center gap-4 hover:shadow-xl transition-shadow">
                    <div class="flex-shrink-0 h-16 w-16 bg-rose-100 rounded-full flex items-center justify-center">
                        <svg class="h-8 w-8 text-rose-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                           <path stroke-linecap="round" stroke-linejoin="round" d="M15 10.5a3 3 0 11-6 0 3 3 0 016 0z" />
                           <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z" />
                        </svg>
                    </div>
                    <div>
                        <h3 class="font-bold text-xl mb-1">GPS למדף התבלינים</h3>
                        <p>סוף סוף, דרך להבדיל בין כמון לייאוש. (ספוילר: הם נראים אותו דבר).</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Testimonials Section -->
        <section class="mb-16 fade-in" style="animation-delay: 1200ms;">
            <h2 class="text-3xl font-bold text-center mb-8 text-rose-600">עדויות מהשטח: סיפורים מלב המהפכה</h2>
            <div class="max-w-4xl mx-auto grid md:grid-cols-2 gap-8">
                <!-- Testimonial 1 -->
                <div class="bg-rose-50 p-6 rounded-lg shadow-lg border border-rose-200 text-center">
                    <p class="italic text-lg">"בהתחלה זה היה רק חומוס. 'זה בריא', הוא אמר. אבל אז הגיע השקשוקה. היום? גיליתי אותו קורא בלוג אפייה. אני לא יודעת מי הוא האדם הזה יותר, אבל יש לנו בראוניז מדהימים, אז אני זורמת עם זה."</p>
                    <p class="font-bold mt-4">- רונית, אשה מבולבלת אך שבעה</p>
                </div>
                <!-- Testimonial 2 -->
                <div class="bg-rose-50 p-6 rounded-lg shadow-lg border border-rose-200 text-center">
                    <p class="italic text-lg">"עקבתי אחרי מתכון לפסטה. הוראות פשוטות, נכון? טעות. אחרי שסיימתי, מצאתי את עצמי מנהל שיחה רגשית עמוקה עם החתול שלנו. אני חושב שהבזיליקום היה שער בין-ממדי."</p>
                    <p class="font-bold mt-4">- דני, בעל חתול מואר רוחנית</p>
                </div>
                 <!-- Testimonial 3 -->
                <div class="bg-rose-50 p-6 rounded-lg shadow-lg border border-rose-200 text-center md:col-span-2">
                    <p class="italic text-lg">"יוסי תמיד היה גבר-גבר. כדורגל, בירות, אתה יודע. ואז הוא התחיל לאפות לחם מחמצת. עכשיו הוא מדבר איתי על 'פיתוח גלוטן' ו'רמות הידרציה'. אני מתגעגע לימים שבהם הדבר הכי מסובך שדיברנו עליו היה נבדל."</p>
                    <p class="font-bold mt-4">- שלומי, חבר מודאג</p>
                </div>
            </div>
        </section>

    </main>

    <!-- UI Buttons -->
    <div id="chatbot-container" class="fixed bottom-20 left-5 z-50">
        <!-- Chat toggle button -->
        <button id="chat-toggle" class="bg-rose-500 text-white rounded-full p-4 shadow-lg hover:bg-rose-600 focus:outline-none focus:ring-2 focus:ring-rose-500 focus:ring-offset-2 transition-transform hover:scale-110">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
            </svg>
        </button>

        <!-- Chat window -->
        <div id="chat-window" class="absolute bottom-20 left-0 w-80 sm:w-96 h-[500px] bg-white rounded-lg shadow-2xl flex flex-col transform scale-95 opacity-0 pointer-events-none">
            <header class="bg-rose-500 text-white p-4 rounded-t-lg flex justify-between items-center">
                <h3 class="font-bold text-lg">שאל/י את מהפכנית המטבח</h3>
                <button id="chat-close" class="text-white hover:text-rose-200 text-3xl leading-none">&times;</button>
            </header>
            <div id="chat-messages" class="flex-1 p-4 overflow-y-auto flex flex-col-reverse">
                <!-- Messages will be appended here -->
                 <div class="flex flex-col items-end space-y-2">
                     <div class="bot-message p-3 rounded-lg message-bubble">
                         <p>שלום! אני כאן כדי לנפץ תקרות זכוכית וקליפות ביצים. במה אוכל לעזור לך לחולל מהפכה במטבח היום?</p>
                     </div>
                 </div>
            </div>
            <div id="loading-indicator" class="p-4 text-center hidden">
                <div class="animate-spin rounded-full h-6 w-6 border-b-2 border-rose-500 mx-auto"></div>
            </div>
            <footer class="p-2 border-t border-slate-200">
                <div class="flex">
                    <input type="text" id="chat-input" placeholder="כתוב/י הודעה..." class="flex-1 p-2 border border-slate-300 rounded-l-md focus:outline-none focus:ring-2 focus:ring-rose-500">
                    <button id="chat-send" class="bg-rose-500 text-white p-3 rounded-r-md hover:bg-rose-600">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 transform -rotate-90" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" /></svg>
                    </button>
                </div>
            </footer>
        </div>
    </div>

    <!-- Ticker Footer -->
    <footer id="ticker-footer" class="fixed bottom-0 left-0 w-full bg-slate-800 text-white p-3 z-40">
        <p id="ticker-text"></p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // This variable should be populated by your server/environment.
            // Example: A server-side script could replace '""' with a valid key.
            const apiKey = ""; 

            // --- Chatbot UI Logic ---
            const chatToggle = document.getElementById('chat-toggle');
            const chatWindow = document.getElementById('chat-window');
            const chatClose = document.getElementById('chat-close');
            const chatMessages = document.getElementById('chat-messages');
            const chatInput = document.getElementById('chat-input');
            const chatSend = document.getElementById('chat-send');
            const loadingIndicator = document.getElementById('loading-indicator');

            const toggleChatWindow = () => {
                if (chatWindow.classList.contains('opacity-0')) {
                    chatWindow.classList.remove('opacity-0', 'scale-95', 'pointer-events-none');
                    chatWindow.classList.add('opacity-100', 'scale-100');
                    chatInput.focus();
                } else {
                    chatWindow.classList.add('opacity-0', 'scale-95', 'pointer-events-none');
                    chatWindow.classList.remove('opacity-100', 'scale-100');
                }
            };

            chatToggle.addEventListener('click', toggleChatWindow);
            chatClose.addEventListener('click', toggleChatWindow);

            // --- Chatbot & Recipe API Logic ---
            const chatbotSystemPrompt = `את צ'אטבוטית פמיניסטית קיצונית. שמך הוא "מהפכנית המטבח". המטרה שלך היא לענות על שאלות בנוגע לשוויון מגדרי במטבח, החשיבות של פמיניזם, וההשלכות ההרסניות של שובניזם. השתמשי בהומור, סרקזם והגזמות כדי להעביר את הנקודה שלך. אל תתנצלי על דעותייך. כל שיחה חייבת, בסופו של דבר, להתקשר חזרה לכך שבישול הוא מיומנות אנושית אוניברסלית, לא חובה נשית. עני בעברית רהוטה ולוחמנית.`;
            
            const recipeSystemPrompt = `You are a revolutionary, feminist chef with a sharp sense of humor. Your goal is to create simple, delicious recipes that empower anyone to cook. When a user gives you a list of ingredients, you must create a recipe using ONLY those ingredients (you can assume basic pantry staples like oil, salt, pepper, and water).

Your response MUST be in Hebrew and formatted in the following structure, using Markdown for titles and headings:
# [A catchy, empowering, and slightly dramatic title for the recipe]
[A short, witty introduction (1-2 sentences).]
## המצרכים (או: הנשק שלך)
- [Ingredient 1]
- [Ingredient 2]
## הוראות ההכנה (או: תוכנית הקרב)
1. [First step with clear instructions and feminist commentary]
2. [Second step...]

Maintain a confident, rebellious, and encouraging tone throughout. Make it fun. Never suggest the recipe is difficult.`;

            const addMessage = (text, sender) => {
                const messageContainer = document.createElement('div');
                messageContainer.className = 'flex flex-col items-start space-y-2';

                const messageWrapper = document.createElement('div');
                messageWrapper.className = `p-3 rounded-lg message-bubble ${sender === 'user' ? 'user-message' : 'bot-message'}`;
                // Simple markdown to HTML for chat
                let formattedText = text.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>').replace(/\*(.*?)\*/g, '<em>$1</em>').replace(/\n/g, '<br>');
                messageWrapper.innerHTML = `<p>${formattedText}</p>`;

                if (sender === 'user') {
                    messageWrapper.classList.add('self-start')
                } else {
                    messageWrapper.classList.add('self-end')
                }

                messageContainer.appendChild(messageWrapper);
                chatMessages.prepend(messageContainer);
            };

            const handleSendMessage = async () => {
                const userMessage = chatInput.value.trim();
                if (!userMessage) return;

                addMessage(userMessage, 'user');
                chatInput.value = '';
                loadingIndicator.classList.remove('hidden');

                try {
                    const botResponse = await callGeminiAPI(userMessage, chatbotSystemPrompt);
                    addMessage(botResponse, 'bot');
                } catch (error) {
                    console.error("Gemini API Error:", error);
                    addMessage("אופס, נראה שיש הפרעות פטריארכליות על הקו. ייתכן שמפתח ה-API חסר או שלא הוגדר כראוי בסביבת השרת.", 'bot');
                } finally {
                    loadingIndicator.classList.add('hidden');
                }
            };
            
            async function fetchWithRetry(url, options, retries = 3, delay = 1000) {
                for (let i = 0; i < retries; i++) {
                    try {
                        const response = await fetch(url, options);

                        if (response.ok) return response.json();

                        // For non-retriable client errors (4xx except 429), fail immediately.
                        if (response.status >= 400 && response.status < 500 && response.status !== 429) {
                            const errorText = await response.text();
                            // Custom error object to stop retries
                            const finalError = new Error(`Non-retriable API error: Request failed with status ${response.status}. Body: ${errorText || 'empty'}`);
                            finalError.isNonRetriable = true;
                            throw finalError;
                        }
                        
                        // For server errors (5xx) or rate limiting (429), we want to retry.
                        // Throw a generic error to be caught by the catch block below.
                        throw new Error(`API Error: ${response.status}`);

                    } catch (error) {
                        // If it's the flagged non-retriable error, throw it up to the caller immediately.
                        if (error.isNonRetriable) {
                            console.error(error.message);
                            throw error;
                        }

                        // If this is the last attempt for a retriable error, throw it.
                        if (i === retries - 1) {
                            console.error("API call failed after all retries.", error);
                            throw error;
                        }

                        // Wait before the next retry.
                        await new Promise(res => setTimeout(res, delay * Math.pow(2, i)));
                    }
                }
            }

            const callGeminiAPI = async (userQuery, systemPrompt) => {
                 if (!apiKey) {
                    throw new Error("מפתח API של Gemini חסר. יש להגדיר אותו בסביבת השרת.");
                }
                
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

                const payload = {
                    contents: [{ parts: [{ text: userQuery }] }],
                    tools: [{ "google_search": {} }],
                    systemInstruction: { parts: [{ text: systemPrompt }] },
                };

                const result = await fetchWithRetry(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (result && result.candidates && result.candidates[0].content && result.candidates[0].content.parts[0].text) {
                    return result.candidates[0].content.parts[0].text;
                } else {
                    console.error("Invalid response structure from Gemini API:", result);
                    if (result && result.error) {
                         throw new Error(`API Error: ${result.error.message}`);
                    }
                    throw new Error("לא קיבלתי תשובה מהפכנית מספיק מהשרת. נראה שמישהו שם צריך לעבור סדנת מודעות.");
                }
            };

            chatSend.addEventListener('click', handleSendMessage);
            chatInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    handleSendMessage();
                }
            });

            // --- AI Recipe Generator Logic ---
            const ingredientsInput = document.getElementById('ingredients-input');
            const generateRecipeBtn = document.getElementById('generate-recipe-btn');
            const recipeOutput = document.getElementById('recipe-output');
            const btnText = document.getElementById('btn-text');
            const btnLoader = document.getElementById('btn-loader');

            const handleGenerateRecipe = async () => {
                const ingredients = ingredientsInput.value.trim();
                if (!ingredients) {
                    recipeOutput.innerHTML = `<p class="text-center text-red-600 font-bold">פטריארכיה ריקה לא יכולה להכין ארוחה. אנא הכניסי מצרכים!</p>`;
                    recipeOutput.classList.remove('hidden');
                    return;
                }

                btnText.classList.add('hidden');
                btnLoader.classList.remove('hidden');
                generateRecipeBtn.disabled = true;
                recipeOutput.classList.add('hidden');

                try {
                    const userQuery = `צור/צרי מתכון מהמצרכים הבאים: ${ingredients}`;
                    const recipeText = await callGeminiAPI(userQuery, recipeSystemPrompt);
                    
                    // Convert markdown to HTML
                    const formattedRecipe = recipeText
                        .replace(/^#\s*(.*)$/gm, '<h2 class="text-3xl font-bold text-center mb-4">$1</h2>')
                        .replace(/^##\s*(.*)$/gm, '<h3 class="text-2xl font-bold text-rose-600 mt-6 mb-4">$1</h3>')
                        .replace(/-\s(.*?)\n/g, '<li class="ml-6 mb-2">$1</li>')
                        .replace(/(\d+)\.\s(.*?)\n/g, '<li class="ml-6 mb-2">$1. $2</li>')
                        .replace(/<\/li>\n<li/g, '</li><li') // Clean up lists
                        .replace(/(<li.*<\/li>)/gs, (match) => `<ul class="list-disc list-inside">${match.replace(/<li/g, '<li class="mb-2"')}</ul>`) // Wrap in ul/ol
                        .replace(/<ul/g, '<ol').replace(/<\/ul/g, '</ol>') // Make numbered lists
                        .replace(/\n/g, '<br>');

                    recipeOutput.innerHTML = formattedRecipe;
                    recipeOutput.classList.remove('hidden');
                } catch (error) {
                    console.error("Recipe Generation Error:", error);
                    recipeOutput.innerHTML = `<p class="text-center text-red-600 font-bold">אוי לא! נראה שהייתה תקלה במטבח המהפכה. יש לוודא שמפתח ה-API הוגדר כראוי בסביבת השרת.</p>`;
                    recipeOutput.classList.remove('hidden');
                } finally {
                    btnText.classList.remove('hidden');
                    btnLoader.classList.add('hidden');
                    generateRecipeBtn.disabled = false;
                }
            };

            generateRecipeBtn.addEventListener('click', handleGenerateRecipe);
            ingredientsInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    handleGenerateRecipe();
                }
            });

            // --- Ticker Logic ---
            const tickerText = document.getElementById('ticker-text');
            if (tickerText) {
                const phrases = ["את חמודה כשאת כועסת...", "חיוך, מה קרה?", "זה בטח 'הזמן הזה בחודש'...", "אני אעזור לך עם זה, זה כבד מדי בשבילך.", "את בטוחה שאת מבינה בזה?", "מי לימד אותך לבשל ככה? אמא שלך?", "בואי אני אסביר לך איך זה עובד באמת...", "את נוהגת לא רע... בשביל אישה.", "את לא צריכה לדאוג לדברים כאלה, יש גברים בשביל זה.", "תירגעי, זה סתם בצחוק."];
                const shuffledPhrases = [...phrases].sort(() => Math.random() - 0.5).join(' &nbsp; • &nbsp; ');
                let tickerContent = '';
                for (let i = 0; i < 15; i++) {
                    tickerContent += shuffledPhrases + ' &nbsp; • &nbsp; ';
                }
                tickerText.innerHTML = tickerContent;
            }
            
            // --- Equity Calculator Logic ---
            const calculateBtn = document.getElementById('calculate-btn');
            const sliders = document.querySelectorAll('.task-slider');

            sliders.forEach(slider => {
                slider.addEventListener('input', (event) => {
                    const valueSpan = event.target.nextElementSibling.querySelector('.slider-value');
                    valueSpan.textContent = event.target.value;
                });
            });

            if (calculateBtn) {
                calculateBtn.addEventListener('click', () => {
                    let p1Total = 0;
                    document.querySelectorAll('[data-person="1"]').forEach(slider => {
                        p1Total += parseInt(slider.value, 10);
                    });

                    let p2Total = 0;
                    document.querySelectorAll('[data-person="2"]').forEach(slider => {
                        p2Total += parseInt(slider.value, 10);
                    });

                    const grandTotal = p1Total + p2Total;
                    if (grandTotal === 0) {
                        const resultsDiv = document.getElementById('calculator-results');
                        resultsDiv.classList.remove('hidden');
                        const verdictText = document.getElementById('verdict-text');
                        verdictText.textContent = "נראה שאף אחד לא עושה כלום... זה שוויון מסוג אחר. אנא הזינו ערכים.";
                         verdictText.className = "text-xl font-bold mt-6 p-4 bg-blue-100 border border-blue-300 text-blue-800 rounded-lg shadow-inner max-w-xl mx-auto";
                        return;
                    }
                    
                    const p1Percentage = Math.round((p1Total / grandTotal) * 100);
                    const p2Percentage = 100 - p1Percentage;

                    // Update results UI
                    const resultsDiv = document.getElementById('calculator-results');
                    resultsDiv.classList.remove('hidden');

                    const p1Bar = document.getElementById('p1-bar');
                    const p2Bar = document.getElementById('p2-bar');
                    const p1PercentageSpan = document.getElementById('p1-percentage');
                    const p2PercentageSpan = document.getElementById('p2-percentage');
                    const verdictText = document.getElementById('verdict-text');
                    
                    p1Bar.style.width = `${p1Percentage}%`;
                    p1Bar.textContent = p1Percentage > 10 ? `${p1Percentage}%` : '';
                    p2Bar.style.width = `${p2Percentage}%`;
                    p2Bar.textContent = p2Percentage > 10 ? `${p2Percentage}%`: '';

                    p1PercentageSpan.textContent = p1Percentage;
                    p2PercentageSpan.textContent = p2Percentage;
                    
                    // Determine verdict
                    if (p1Percentage > 85 || p2Percentage > 85) {
                        verdictText.textContent = "מצב חירום פטריארכלי! אדם אחד מנהל פה מסעדה קטנה בזמן שהשני... נח? זה לא שוויון, זה ניצול. הגיע הזמן למרוד!";
                        verdictText.className = "text-xl font-bold mt-6 p-4 bg-red-100 border border-red-300 text-red-800 rounded-lg shadow-inner max-w-xl mx-auto";
                    } else if (p1Percentage > 65 || p2Percentage > 65) {
                         verdictText.textContent = "אזעקת שוביניזם! נראה שמישהו כאן עושה את רוב העבודה. אולי הגיע הזמן לשיחה צפופה על חלוקת שלל... כלומר, כלים.";
                         verdictText.className = "text-xl font-bold mt-6 p-4 bg-yellow-100 border border-yellow-300 text-yellow-800 rounded-lg shadow-inner max-w-xl mx-auto";
                    } else {
                         verdictText.textContent = "מדהים! נראה שמצאתם את המתכון הסודי לשותפות. המהפכה מריעה לכם!";
                         verdictText.className = "text-xl font-bold mt-6 p-4 bg-green-100 border border-green-300 text-green-800 rounded-lg shadow-inner max-w-xl mx-auto";
                    }
                });
            }

        });
    </script>
</body>
</html>

